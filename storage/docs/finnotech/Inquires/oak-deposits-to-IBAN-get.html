<!DOCTYPE html>
<head>
<meta charset="UTF-8">
    <meta name="robots" content="noindex"/>
</head>
<html>
<title>دریافت شماره شبا از روی شماره حساب</title>
<body onload="checkSandbox()">
<xmp theme="cerulean" style="display:none;">

###GET  /oak/v2/clients/{clientId}/iban

* **شرح: ** سرویس دریافت شماره شبا از روی شماره حساب

* **اسکوپ: **  ```oak:deposit-to-iban:get```

* **رویکرد: ** ```CLIENT_CREDENTIAL```

* **<a href="ResponseCodeOak.pdf"> دانلود مستندات ریسپانس کد ها</a> **
``````````````
{address}/oak/v2/clients/{clientId}/iban?trackId={trackId}&bank={bank}&deposit={deposit}
``````````````

<div class="sandboxaddress sandbox" id="sandbox" style="float:right" style="display: none" >
 https://sandboxapi.finnotech.ir<b><span class="finnotech-sandbox-address-text"> :address </span></b>
</div>

<div class="production-address production" style="float:right" style="display: block">
 https://api.finnotech.ir <b> :address </b>
 </div>


#### Headers
مقادیر زیر باید در هدر قرار بگیرد
````````````````
Authorization : Bearer {Token}
````````````````
* برای فراخوانی این سرویس باید از توکن CLIENT_CREDENTIAL استفاده نمایید.

#### URI Parameters
* **clientId: ** (اجباری) شناسه کلاینت

#### Query Parameters
* ** trackId: ** (اختیاری) &#x202b; رشته ای با طول حداکثر ۲۰ کاراکتر شامل حرف و عدد. پیشنهاد ما برای trackId تولید کردن UUID است. در صورت نیاز به نتیجه یک فراخوانی میتوانید با trackId آن را فیلتر کنید. در گزارش فراخوانی سرویس فراخوانی مورد نظر را با همین کد پیگیری پیدا میکنید.
  * example:  ```get-IBAN-status-010```
* **bank: **(اجباری)  کد بانک حساب بر اساس لیست زیر ارسال گردد.
  * اقتصاد نوین: ۰
  * سامان: ۱
  * سرمایه: ۲
  * توسعه: ۳
  * سینا: ۴
  * تجارت: ۶
  * صنعت و معدن: ۷
  * کشاورزی:‌ ۸
  * توسعه صادرات: ۹
  * کارآفرین: ۱۰
  * آینده: ۱۱
  * صادرات: ۱۲
  * ملی: ۱۳
  * رسالت: ۱۴
  * انصار: ۱۵
  * ایران زمین: ۱۶


* **deposit:‌ ** شماره حسابی که قصد دریافت شماره شبا آن را دارید
    * شماره حساب بانک‌های سامان، سرمایه، توسعه، سینا، پاسارگاد، اقتصادنوین، دی، ایران زمین و رسالت همراه با خط تیره باید ارسال گردد.
    * برای مثال : 650-5454-889-5 و یا 202-8504-2

#### Request Example
``````````````
https://api.finnotech.ir/oak/v2/clients/testClient/iban?trackId=get-IBAN-010&bank=11&deposit=020251895421
``````````````


####Results Format
##### Successful result format (status code 200)
````````````````
  {
    "result": {
          "IBAN": "IR120620000000302876732005"
        , "deposit": "0302876732007"
        , "bankName": "آینده"
        , "depositDescription": "حساب فعال است"
        , "depositStatus": "02"
        , "depositOwners": [
          {
            "firstName": "سحر"
          , "lastName": "قاسمی"
          }
        ]
        , "depositComment": ""
    }
  , "status": "DONE"
  , "trackId": "get-IBAN-010"
  }
````````````````
* اگر در پاسخ سرویس مقادیر depositOwners, bankName و depositComment خالی بود، سرویس استعلام شبا برای شبای تولیدی پاسخی برنگردانده است.

* **result:** آبجکتی از پاسخ سرویس شامل:
  * **IBAN: ** شماره شبا محاسبه شده
  * **deposit: ** شماره حساب
  * **card: ** شماره کارت ارسال شده
  * **bankName: ** نام بانک
  * **depositDescription:**  شرح حساب
  * **depositOwners:** آرایه ای از صاحبان حساب
    * **firstName: ** نام
    * **lastName: ** نام خانوادگی
  * **depositComment:**
  * **depositStatus:** میتواند مقادیر زیر را بگیرد
    * **‌02 :** حساب فعال است
    * **‌03 :** حساب مسدود با قابلیت واریز
    * **‌04 :** حساب مسدود بدون قابلیت واریز
    * **‌05 :** حساب راکد است
    * **‌06 :** بروز خطادر پاسخ دهی , شرح خطا در فیلد توضیحات است
    * **‌07 :** سایر موارد
* **status: ** وضعیت فراخوانی سرویس
 * DONE: فراخوانی موفق سرویس
 * FAILED: فراخوانی ناموفق سرویس
* **error:** جزییات خطا (در صورت بروز خطا)
* **trackId: ** کد پیگیری، اگر ارسال شده باشد همان مقدار برگردانده میشود و در غیر اینصورت یک رشته تصادفی تولید و برگردانده میشود

#### UnSuccessful result format
````````````````
  {
    "status": "FAILED",
  , "trackId": "TrackID"
  , "error": {
        "code": "ERROR Title"
      , "message": "Unsuccessful Message"
    }
  }
````````````````
در صورتی که شماره حساب ارسالی نامعتبر باشد با خطای زیر مواجه خواهید شد:

````````````````
  {
    "status": "FAILED"
  , "trackId": "get-IBAN-012"
  , "error": {
        "code": "VALIDATION_ERROR"
      , "message": "invalid deposit"
    }
  }
````````````````
در صورتی که برای شبای تولیدی، استعلامی دریافت نشود:

````````````````
  {
    "result": {
       "IBAN": "IR210620000000202329724000"
      , "deposit": "02028793240005"
      , "bankName": "آینده"
      , "depositDescription": "بروز خطا در پاسخ دهی"
      , "depositOwners": []
      , "depositComment": "Invalid IBAN"
    }
  , "status": "DONE"
  , "trackId": "deposit-to-ibanError"
  }
````````````````

 در اینجا میتوانید لیست خطاهای سرویس ها را مشاهده کنید  [لیست خطاها](/doc/generic-errors.html)

</xmp>
</body>
<script src="strapdown.js"></script>
<script src="controler.js"></script>
</html>
