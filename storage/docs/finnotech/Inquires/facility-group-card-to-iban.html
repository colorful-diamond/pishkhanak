<!DOCTYPE html>
<head>
<meta charset="UTF-8">
    <meta name="robots" content="noindex"/>
</head>
<html>
<title>تبدیل کارت به شبا گروهی</title>
<body onload="checkSandbox()">
 <xmp theme="cerulean" style="display:none;">

###POST   /facility/v2/clients/{clientId}/groupCardToIban
* **شرح: **
این سرویس با دریافت فایل اکسل شامل لیستی از شماره کارت ها، تبدیل به شبای گروهی انجام داده و پس از آماده شدن، برای دریافت خروجی اطلاع رسانی انجام میدهد

* **سرویس‌های مرتبط :[دریافت فایل خروجی تبدیل شماره کارت به شبا گروهی](/doc/facility-group-card-to-iban-inquiry.html?sandbox=+sandbox/)**

* **اسکوپ: **  ```facility:group-card-to-iban:post```

* **رویکرد: ** ```Client-Credential```

````````````````
{address}/facility/v2/clients/{clientId}/groupCardToIban?trackId={trackId}
````````````````
<div class="sandboxaddress sandbox" id="sandbox" style="float:right" style="display: none" >
 https://sandboxapi.finnotech.ir<b><span class="finnotech-sandbox-address-text"> :address </span></b>
</div>

<div class="production-address production" style="float:right" style="display: block">
 https://api.finnotech.ir <b> :address </b>
 </div>


#### Headers
مقادیر زیر باید در هدر قرار بگیرد
````````````````
Authorization : Bearer {Token}
````````````````
* برای فراخوانی این سرویس باید از توکن CLIENT_CREDENTIAL استفاده نمایید.

#### URI Parameters
* **clientId :**  (اجباری) شناسه کلاینت

#### Query Parameters
* **trackId:**   (اجباری)  &#x202b; کد پیگیری، رشته ای اختیاری با طول حداکثر ۴۰ کاراکتر شامل حرف و عدد. در صورت ارسال trackId، فراخوانی سرویس خود را با همین مقدار استعلام و پیگیری کنید.(در گزارش فراخوانی سرویس ها با همین رشته نتیجه را ببینید). در صورتیکه که این فیلد را ارسال نکنید یک رشته UUID برای این فراخوانی در نظر گرفته میشود و در پاسخ فراخوانی برگردانده میشود.
  * example:  ```get-group-card-to-iban-029```

#### Body
##### Example:
````````````````
{
   "cardsFile": cardsFile.csv
}
````````````````
* نکته: فایل باید به صورت فرم-دیتا فرستاده شود
* نکته: فایل ارسالی باید در قالب نمونه ارسالی و در شیت اول اکسل وارد شود
     * **<a href="cardsFile.csv"> دانلود نمونه فایل ورودی معتبر</a> **

در صورت نیاز به استعلام مجدد کارت های دارای خطای ۵۰۰ به این صورت فرستاده شود. در این حالت نیاز به ارسال مجدد فایل نیست
````````````````
{
  "retry": "true"
, "inquiryTrackId": "get-group-card-to-iban-029"
}
````````````````
* **cardsFile: ** فایل ورودی 
* **retry: ** در صورتی که نیاز به محاسبه مجدد کارت های دارای خطا باشد این پارامتر ارسال میشود. مقادیر قابل قبول true/false
* **inquiryTrackId: ** ترک آیدی فراخوانی ای که نیاز به تبدیل مجدد شماره کارت به شبا دارد



####Results Format
##### Successful result format (status code 200)
````````````````
{
  "trackId": "get-group-card-to-iban-029",
  "result": {
      "message": "عملیات در صف بررسی قرار گرفت. در صورت اتمام عملیات نتیجه به شما اعلام می گردد"
  },
  "status": "DONE"
}

````````````````
* **result:** آبجکتی از پاسخ سرویس شامل:
  * **message:** پیام قرار گرفتن در صف بررسی
* **status: ** وضعیت فراخوانی سرویس
 * DONE: فراخوانی موفق سرویس
 * FAILED: فراخوانی ناموفق سرویس
* **error:** جزییات خطا (در صورت بروز خطا)
* **trackId: **‌ کد پیگیری، اگر ارسال شده باشد همان مقدار و در غیر اینصورت یک رشته تصادفی تولید و برگردانده میشود


#### UnSuccessful result format
 در اینجا میتوانید لیست خطاهای سرویس ها را مشاهده کنید  [لیست خطاها](/doc/generic-errors.html)

</xmp>
</body>
<script src="strapdown.js"></script>
<script src="controler.js"></script>
</html>

