<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex"/>
</head>
<html>
<title>استعلام مرسولات پستی</title>
<body onload="checkSandbox()">
 <xmp theme="cerulean" style="display:none;">

###GET   /ecity/v2/clients/{clientId}/postalInquiry
* **شرح: **  با فراخوانی این سرویس، اطلاعات رهگیری بسته بر میگردد.

* **اسکوپ: **  ```ecity:postal-inquiry:get```

* **رویکرد: ** ```Client_Credential```

* **<a href="response-code-postal-inquiry.pdf"> دانلود مستندات ریسپانس کد ها</a> **

````````````````
{address}/ecity/v2/clients/{clientId}/postalInquiry?trackId={trackId}&trackingCode={trackingCode}
````````````````
<div class="sandboxaddress sandbox" id="sandbox" style="float:right" style="display: none" >
    https://sandboxapi.finnotech.ir<b><span class="finnotech-sandbox-address-text"> :sandbox address </span></b>
</div>

<div class="production-address production" style="float:right" style="display: block">
    https://api.finnotech.ir <b> :address </b>
</div>


#### Headers
مقادیر زیر باید در هدر قرار بگیرد
````````````````
Authorization : Bearer {Token}
````````````````
* برای فراخوانی این سرویس لازم است پس از دریافت  توکن Client Credential سرویس را فراخوانی نمایید.

#### URI Parameters
* **clientId:**شناسه کلاینت


#### Query Parameters
* **trackId:** اختیاری (string)  &#x202b; کد پیگیری، رشته ای اختیاری با طول حداکثر ۴۰ کاراکتر شامل حرف و عدد. در صورت ارسال trackId، فراخوانی سرویس خود را با همین مقدار استعلام و پیگیری کنید.(در گزارش فراخوانی سرویس ها با همین رشته نتیجه را ببینید). در صورتیکه که این فیلد را ارسال نکنید یک رشته UUID برای این فراخوانی در نظر گرفته میشود و در پاسخ فراخوانی برگردانده میشود.

* example:  ```getUserinfo876543```


* **trackingCode:** شناسه پیگیری مرسوله
* example:  ```000000000000000000000000```



####Results Format
##### Successful result format (status code 200)
````````````````
{
   "responseCode": "FN-EYVH-20001700000",
   "trackId": "cf65bc2d-c1b3-4579-90bf-ac5ab6448741",
   "result": {
        "postType": "پیشتاز",
        "sourcePostOffice": "دفتر پیشخوان دولت72162332",
        "source": "استان تهران شهر منطقه 14 پستي تهران",
        "destination": "استان تهران شهر تهران",
        "senderName": "senderName",
        "receiverName": "receiverName",
        "sourcePostalCode": "",
        "destinationPostalCode": "",
        "weight": "425",
        "totalAmount": "291995",
        "details" : [
            {
                "date": "1403/05/31",
                "event": "مرسوله تحویل گیرنده گردیده است.",
                "id": "5",
                "postalNode": "تهران،منطقه 17 پستي تهران،نقطه مبادله پستی منطقه17"
                "time": "14:39",
            },
            {
                "date": "1403/05/31",
                "event": "مرسوله جهت توزیع تحویل نامه رسان شده است",
                "id": "4",
                "postalNode": "تهران،منطقه 17 پستي تهران،نقطه مبادله پستی منطقه17",
                "time": "08:12"
            },
            {
                "event": "ورود مرسوله به منطقه پستی تهران،منطقه 17 پستي تهران،نقطه مبادله پستی منطقه17 تائيد شد",
                "date": "1403/05/29",
                "id": "3",
                "postalNode": "تهران،منطقه 17 پستي تهران،نقطه مبادله پستی منطقه17",
                "time": "07:09"
            },
            {
                "date": "1403/05/28",
                "event": " تحویل مرسوله به پست، آماده سازی مرسوله جهت ارسال به تهران،منطقه 17 پستي تهران،نقطه مبادله پستی منطقه17",
                "id": "2",
                "postalNode": "تهران،مرکز تجزیه و مبادلات کشور،اداره کل تجزیه و مبادلات تهران",
                "time": "19:50"
            },
            {
                "date": "1403/05/27",
                "event": "تولید بارکد پستی",
                "id": "1",
                "postalNode": "",
                "time": "16:16"
            }
        ]
   },
   "status": "DONE"
}
````````````````
* **responseCode:** کد پاسخ دریافتی
* **trackId: ** کد پیگیری، اگر ارسال شده باشد همان مقدار و در غیر اینصورت یک رشته تصادفی تولید و برگردانده میشود
* **result:** نتیجه درخواست
    * **postType: **  نوع ارسال
    * **sourcePostOffice: ** دفتر پست مبدا
    * **source: ** مبدا
    * **destination: ** مقصد
    * **senderName: ** فرستنده
    * **receiverName: ** گیرنده
    * **sourcePostalCode: **  کدپستی مبدا
    * **destinationPostalCode: **  کدپستی مقصد
    * **weight: ** وزن
    * **totalAmount: ** هزینه 
    * **details: ** جزئیات
        * **date: ** تاریخ
        * **event: ** رویداد
        * **id: ** شماره
        * **postalNode: ** موقعیت پستی
        * **time: ** ساعت

* **status:** وضعیت درخواست
* **error:** جزییات خطا (در صورت بروز خطا)
#### UnSuccessful result format
 در اینجا میتوانید لیست خطاهای سرویس ها را مشاهده کنید  [لیست خطاها](/doc/generic-errors.html)

</xmp>
</body>
<script src="strapdown.js"></script>
<script src="controler.js"></script>
</html>
