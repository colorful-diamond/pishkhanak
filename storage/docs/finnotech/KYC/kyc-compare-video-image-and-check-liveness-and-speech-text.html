<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex"/>
</head>
<html>
<title>انطباق ویدئو زنده با عکس کارت ملی</title>
<body onload="checkSandbox()">
<xmp theme="cerulean" style="display:none;">

###POST /kyc/v2/clients/{clientId}/compareLiveVideoWithNationalCard
* **شرح: ** احراز هویت با ویدیو، این سرویس ویدیوی لایو کاربر، کدملی٬ تاریخ تولد و سریال پشت کارت ملی هوشمند (یا کد رهگیری رسید کاغذی کارت ملی هوشمند)
را دریافت میکند و ویدیوی ارسالی را با عکس کارت ملی چک کرده و درستی و نادرستی ویدیو را تایید و رد میکند. لازم به ذکر است این سرویس از یازده شب تا هفت صبح در دسترسی نمیباشد

* **اسکوپ: ** ```kyc:compare-live-video-with-national-card-image:post```

* **رویکرد: ** ```Client_Credential```

* **<a href="Responsecodes.pdf"> دانلود مستندات ریسپانس کد ها</a> **

````````````````
  {address}/kyc/v2/clients/{clientId}/compareLiveVideoWithNationalCard?trackId={trackId}

````````````````
  <div class="sandboxaddress sandbox" id="sandbox" style="float:right" style="display: none">
    https://sandboxapi.finnotech.ir <b> :address </b>
  </div>

  <div class="production-address production" style="float:right" style="display: block">
    https://api.finnotech.ir <b> :address </b>
  </div>


  #### Headers
  مقادیر زیر باید در هدر قرار بگیرد
  ````````````````
  Authorization : Bearer {Token}
  ````````````````
  &#x202b;برای فراخوانی این سرویس باید از توکن Client Credential استفاده نمایید.

  #### URI Parameters
  * **clientId :** (اجباری) شناسه کلاینت

  #### Query Parameters
  * **trackId:** اجباری (string) &#x202b; کد پیگیری، رشته ای اختیاری با طول حداکثر ۴۰ کاراکتر شامل حرف و عدد. در صورت
  ارسال trackId، فراخوانی سرویس خود را با همین مقدار استعلام و پیگیری کنید.(در گزارش فراخوانی سرویس ها با همین رشته
  نتیجه را ببینید). در صورتیکه که این فیلد را ارسال نکنید یک رشته UUID برای این فراخوانی در نظر گرفته میشود و در پاسخ
  فراخوانی برگردانده میشود.
  ### Body Parameter
   توجه داشته باشید که پارامترهای ورودی در فرمت فرم دیتا ارسال شوند* **
  * **video:(اجباری)  ** ویدیوی کاربر به صورت فایل با حجم حداکثر پنچ مگابایت
  * **nationalCode:(اجباری)  ** کد ملی
  * **birthDate:(اجباری) **  تاریخ تولد اجباری است، به صورت yyyy/mm/dd
  * **serialNumber:  (اجباری) ** سریال پشت کارت ملی هوشمند (یا کد رهگیری رسید کاغذی کارت ملی هوشمند)
  * **speechText:  (اختیاری) ** اگر ویدیوی ارسالی باید حاوی خوانش متنی باشد٬ متن مورد انتظار را در این فیلد ارسال کنید تا تشابه آن با متن خوانده شده سنجیده شود


### Body Parameter Example
````````````````
  --form video=@"/Users/address Video 2021-07-12 at 17.07.12.mp4"
  --form nationalCode="0024143331"
  --form birthDate="1371/06/18"
  --form serialNumber="1R29366454"
  --form speechText ="سلام سلام همگی سلام"

````````````````
###Results Format
#### Successful result format (status code 200)
````````````````
  {
  "responseCode": "FN-BRFH-20000810000",  
  "trackId": "5ddcd262-2c28-467a-848d-7cef8de85c1c",
  "result": {
  "faceVerification": 95.7,
  "liveness": 80.3,
  "speechSimilarity": 88.3,
  "printLiveness": "0.4205",
  "replayLiveness": "0.0394"
  "trackingCode":"123456"
  },
  "status": "DONE"
  }

````````````````
  * **responseCode:** کد پاسخ دریافتی
  * **result:** آبجکتی از پاسخ سرویس شامل:
    * **faceVerification:** درصد تشابه عکس کارت ملی و ویدیوی ارسالی را نشان می‌دهد. حد آستانه آن 0.9 می‌باشد. در صورتی که مقدار این فیلد بیشتر از 0.9 باشد چهره فرد در ویدیو و عکس کارت‌ملی با یکدیگر مطابقت دارند.
    * **liveness:**  درصد لایو بودن ویدیوی ارسالی را نشان می‌دهد. حد آستانه آن 0.001 می‌باشد. در صورتی که مقدار این فیلد از 0.001 بیشتر باشد، ویدیوی ارسالی لایو می‌باشد.
    * **speechSimilarity:** درصد تشابه متنی که در ویدیو خوانده شده و متنی که به عنوان ورودی انتظار داشتید خوانده شده باشد. این فیلد زمانی به شما باز می‌گردد که در ورودی متن مورد انتظار را داده باشید. حد آستانه آن 0.5 می‌باشد. در صورتی که مقدار این فیلد از 0.5 بزرگتر باشد، متنی که در ویدیو خوانده شده است با متنی که در ورودی انتظار داشتید حوانده شود با یکدیگر مطابقت دارد.
    * **printLiveness:** ویدیویی که از روی عکس گرفته شده است
    * **replayLiveness:** ویدیویی که از روی ویدیو گرفته شده است
    * **trackingCode:** کد پیگیری ثبت احوال
  * **trackId:** کد پیگیری، اگر ارسال شده باشد همان مقدار برگردانده میشود و در غیر اینصورت یک رشته تصادفی تولید و
  برگردانده میشود
  * **status:** &#x202b; وضعیت فراخوانی که میتواند یکی از موارد DONE|FAILED باشد

  #### UnSuccessful result format
  در اینجا میتوانید لیست خطاهای سرویس ها را مشاهده کنید [لیست خطاها](/doc/generic-errors.html)

</xmp>
</body>
<script src="strapdown.js"></script>
<script src="controler.js"></script>
</html>


