<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex"/>
</head>
<html>
<title>گرفتن توکن با رویکرد Client_Credential</title>
<body onload="checkSandbox()">
<xmp theme="cerulean" style="display:none;">

###POST /dev/v2/oauth2/token

* **شرح:** ‫از این سرویس  برای تولید توکن با رویکرد Client_Credential استفاده کنید. از آنجا که این سرویس به منابع (resource) خود کلاینت نیاز دارد احتیاجی به دریافت اجازه دسترسی از کاربر بیرونی نخواهد بود.


````````````````
{address}/dev/v2/oauth2/token
````````````````

<div class="sandboxaddress sandbox" id="sandbox" style="float:right" style="display: none" >
 https://sandboxapi.finnotech.ir<b><span class="finnotech-sandbox-address-text"> :address </span></b>
</div>

<div class="production-address production" style="float:right" style="display: block">
 https://api.finnotech.ir <b> :address </b>
 </div>

#### Notes

* فرستادن تمام پارامتر های Body الزامی است

#### Headers
مقادیر زیر باید در هدر قرار بگیرد
````````````````
Content-Type : application/json
Authorization : Basic {AuthenticationString}
````````````````
مقدار AuthenticationString باید برابر Base64 از اطلاعات برنامه شما به صورت ```YOURCLIENTID:YOURCLIENTSECRET``` باشد. برای مثال اگر شناسه برنامه شما برابر firstapp باشد و رمز برنامه شما که در قسمت جزییات برنامه در کنسول قابل مشاهده است برابر 6932dddb927b76e54997 باشد، شما باید Base64 مقدار ```firstapp:6932dddb927b76e54997``` را تولید کنید. در این صورت مقدار این هدر باید برابر مقدار زیر قرار گیرد:

````````````````
Basic Zmlyc3RhcHA6NjkzMmRkZGI5MjdiNzZlNTQ5OTc=
````````````````

#### Body
##### Example:
````````````````
{ "grant_type": "client_credentials"
, "nid": "0123456789"
, "scopes": "oak:deposit-to-iban:get"
}
````````````````
* **grant_type:** این مقدار باید برابر client_credentials قرار گیرد
* **nid:** کد ملی ۱۰ رقمی شخص فراخوانی کننده که باید به کلاینت دسترسی داشته باشد
* **scopes:** لیست اسکوپ(ها)یی که قصد فراخوانی آن را دارید. اسکوپ‌ها با ',' از هم جدا شوند


####Results Format
##### Successful result format (status code 200)
````````````````
  {
    "result": {
      "value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJy9KQyZXNoVG9rZW4iOiJVNWx0eGV1M3BuYm90UERHOXFQRlVFeTFoTGg5WmVmTHJNb2tQS29qc1AxajBjU0JQNEJLOFZJNkZVNjVzRGNTbjdwVk96UWFQWkh3Um9EVkk4cWNOMkE1NWxvODNSYXlWZncwWEdSTHloUWxXY2VwTE9vWHJ3VjJhMVhIUFZNeHhWYjdIZzJVWDQ1WURIaElkVTlGNjBiQThGeENhZzI0WXBHd2pCSE1jSVJwUjFXM052dTdyWERmUnc4blJ4OUVpaDQ1SzNDYnZwbnVERU5oY3BFQ1p0aEZuMnZHbGJiZThnRVF0Z1djZUNYZVRCeFhRQ1lpRThwMVZjWXNOSVI1IiwiY3JlYXRpb25EYXRlIjoiMTM5NzA3MzAxMTEzNTUiLCJsaWZlVGltZSI6ODY0MDAwMDAwLCJjbGllbnRJZCI6IjU4YTE3YzA3MzZhNjBlNWM2NTI3NGM2OCIsInVzZXJJZCI6IjAxMjM0NTY3ODkiLCJhY3RpdmUiOnRydWUsInNjb3BlcyI6WyJvYWs6ZGVwb3NpdC10by1pYmFuOmdldCJdLCJkZXBvc2l0cyI6W10sIm1vbnRobHlDYWxsTGltaXRhdGlvbiI6bnVsbCwibWF4QW1vdW50UGVyVHJhbnNhY3Rpb24iOm51bGwsImRlc3RpbmF0aW9uIjpudWxsLCJ0eXBlIjoiQ0xJRU5ULUNSRURFTlRJQUwiLCJpYXQiOjE1NDAxOTQyMzV9.ZplbUfe2De7r8RqpbyZ8Pbbf3lqzHoGi0esTXBJM6tM"
    , "scopes": [
        "oak:deposit-to-iban:get"
     ]
    , "lifeTime": 864000000
    , "creationDate": "13970730111355"
    , "refreshToken": "U5ltxeu3pnbotPDG9qPFUEy1hLh9ZefLrMokPKojsP1j0cSBP4BK8VI6FU65sDcSn7pVOzQaPZHwRoDVI8qcN2A55lo83RayVfw0XGRLyhQlWcepLOoXrwV2a1XHPVMxxVb7Hg2UX45YDHhIdU9F60bA8FxCag24YpGwjBHMcIRpR1W3Nvu7rXDfRw8nRx9Eih45K3CbvkmsDENhcpECZthFn2vGlbbe8gEQtgWceCXeTBxXQCYiE8p1VcYsNIR5"
  }
  , "status": "DONE"
  }
````````````````
* **result:**
  * **value:** توکنی که برای فراخوانی سرویس‌ها استفاده میشود
  * **scopes:** آرایه ای از اسکوپ‌های مجاز توکن
  * **lifeTime:** عمر توکن به میلی ثانیه
  * **creationDate:** زمان ساخت توکن به صورت تاریخ شمسی YYYYMMDDHHmmss
  * **refreshToken:** اگر عمر توکن تمام شود با استفاده از این توکن و فراخوانی سرویس توکن قادر خواهید بود توکن جدید دریافت نمایید
* **status:**
    * DONE: فراخوانی موفق سرویس
    * FAILED: فراخوانی ناموفق سرویس
* **error:** جزییات خطا (در صورت بروز خطا)


#### UnSuccessful result format
در اینجا میتوانید لیست خطاهای سرویس ها را مشاهده کنید  [لیست خطاها](/doc/generic-errors.html)
</xmp>
</body>
<script src="strapdown.js"></script>
<script src="controler.js"></script>
</html>

