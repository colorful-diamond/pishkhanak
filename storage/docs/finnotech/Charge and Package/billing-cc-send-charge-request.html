<!DOCTYPE html>
<head>
<meta charset="UTF-8">
    <meta name="robots" content="noindex"/>
</head>
<html>
<title>ارسال درخواست شارژ</title>
<body onload="checkSandbox()">
 <xmp theme="cerulean" style="display:none;">

###POST   /billing/v2/clients/{clientId}/chargeSendRequest
* **شرح: ** وب سرویس شارژ مستقیم این امکان را به مشترکان می دهد تا بدون نیاز به وارد کردن کد رمز و بطور مستقیم خط خود را شارژ نمایند. اپراتور های تحت پوشش شامل: همراه اول، ایرانسل و رایتل می باشند.


* **اسکوپ: **  ```billing:charge-request:post```

* **رویکرد: ** ```Client_Credential```

* **<a href="ResponsecodesBilling.pdf"> دانلود مستندات ریسپانس کد ها</a> **


````````````````
{address}/billing/v2/clients/{clientId}/chargeSendRequest?trackId={trackId}
````````````````
<div class="sandboxaddress sandbox" id="sandbox" style="float:right" style="display: none" >
 https://sandboxapi.finnotech.ir<b><span class="finnotech-sandbox-address-text"> :sandbox address </span></b>
</div>

<div class="production-address production" style="float:right" style="display: block">
 https://api.finnotech.ir <b> :address </b>
 </div>

<br>
<br>
 **سرویس‌های مرتبط :[دریافت لیست کد محصولات شارژ مستقیم](/doc/billing-cc-charge-product-list.html?sandbox=+sandbox/)**
<br>

#### Headers
مقادیر زیر باید در هدر قرار بگیرد
````````````````
Authorization : Bearer {Token}
````````````````
* برای فراخوانی این سرویس لازم است پس از دریافت  توکن Client Credential سرویس را فراخوانی نمایید.

#### URI Parameters
* **clientId:**شناسه کلاینت

#### Query Parameters
* **trackId:** اختیاری (string)  &#x202b; کد پیگیری، رشته ای اختیاری با طول حداکثر ۴۰ کاراکتر شامل حرف و عدد. در صورت ارسال trackId، فراخوانی سرویس خود را با همین مقدار استعلام و پیگیری کنید.(در گزارش فراخوانی سرویس ها با همین رشته نتیجه را ببینید). در صورتیکه که این فیلد را ارسال نکنید یک رشته UUID برای این فراخوانی در نظر گرفته میشود و در پاسخ فراخوانی برگردانده میشود.

  * example:  ```getUserinfo876543```


 ### Body Parameter

 * **amount: (اجباری)  **  مبلغ شارژ مورد نظر که باید بیشتر از پنج هزارتومان باشد
 * **mobile: (اجباری)  ** شماره موبایلی که شارژ روی آن اعمال می شود
 * **requestorMobile: (اختیاری)  ** شماره موبایل درخواست دهنده - در صورتی که برای شخص دیگری شارژ خریداری شود این فیلد پر میشود.
 * **nationalId: (اختیاری)  **  کد ملی مشترک
 * **productType: (اختیاری)  **  نوع محصول
     * 1: شارژ
     * 2: بسته ترکیبی و اینترنت
 * **productId: (اختیاری)  **  کد محصول که از طریق سرویس **[دریافت لیست کد محصولات شارژ مستقیم](/doc/billing-cc-charge-product-list.html?sandbox=+sandbox/)** قابل مشاهده است
 * **operator: (اجباری) **  اپراتور مورد نظر. مقادیر قابل قبول شامل :  **
     **
     * MCI
     * MTN
     * Rightel

### Body Parameter Example
 ````````````````
{
  "requestorMobile":"0910111111",
  "nationalId":"1111111111",
  "mobile":"0910111111",
  "operator":"MCI",
  "amount":"100000",
  "productId": "214",
  "productType": "2"
}


 ````````````````


####Results Format
##### Successful result format (status code 200)
````````````````
{
 "responseCode": "FN-BGTP-20001100000",
 "trackId": "f3de371e-fb73-443f-a848-f7a02556b133",
 "result": {
     "completed": true,
     "status": "Ok",
     "message": "",
     "orderId": "110"
 },
 "status": "DONE"
}

````````````````
     
 می توانید کلید خروجی های سرویس را به تفکیک نوع سرویس از [اینجا](./asset/InfoKey.xlsx) دریافت کنید

     
* **result:** آبجکتی از پاسخ سرویس شامل:
  * **completed:** وضعیت درخواست
  * **status:** وضعیت درخواست
  * **message:** پیام مربوط به درخواست
  * **orderId:** شماره پیگیری مربوط به درخواست شارژ
* **status: ** وضعیت فراخوانی سرویس
     * DONE: فراخوانی موفق سرویس
     * FAILED: فراخوانی ناموفق سرویس
* **trackId: ** کد پیگیری، اگر ارسال شده باشد همان مقدار و در غیر اینصورت یک رشته تصادفی تولید و برگردانده میشود
* **responseCode: ** کد پاسخ فینوتک
* **error:** جزییات خطا (در صورت بروز خطا)


#### UnSuccessful result format
 در اینجا میتوانید لیست خطاهای سرویس ها را مشاهده کنید  [لیست خطاها](/doc/generic-errors.html)




</xmp>
</body>
<script src="strapdown.js"></script>
<script src="controler.js"></script>
</html>


